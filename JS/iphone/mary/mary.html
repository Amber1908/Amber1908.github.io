<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <title>Hello, world!</title>
    <style>
	[box-id]{
	width: 80px;
	height: 80px;
	display: flex;
	justify-content: center;
	align-items: center;
	border:none;
	transition: .3s;
}
[box-id].active{
	border: solid 5px red;
	box-sizing: 0 0 20px red;
	transition: 0s;
}
i{
	font-size: 48px;
}
#msg{
 font-size: 36px;
 text-align: center;
}
    </style>
  </head>
  <body>
    
	<div class="container">
		<div class="row">
			<div box-id="1" class="col"></div>
			<div box-id="2" class="col"></div>
			<div box-id="3" class="col"></div>
			<div box-id="4" class="col"></div>
			<div box-id="5" class="col"></div>
			<div box-id="6" class="col"></div>
			<div box-id="7" class="col"></div>
			<div box-id="8" class="col"></div>
			<div box-id="9" class="col"></div>
			<div box-id="10" class="col"></div>
			<div box-id="11" class="col"></div>
			<div box-id="12" class="col"></div>
			
		</div>
		<div class="row">
			<div box-id="32"class="col"></div>
			<div class="col col-10"></div>
			<div box-id="13"class="col"></div>
		</div>
		<div class="row">
			<div box-id="31"class="col"></div>
			<div class="col col-10"></div>
			<div box-id="14"class="col"></div>
		</div>
		<div class="row">
			<div box-id="30"class="col"></div>
			<div class="col col-10">
				<p id="msg"></p>
			</div>
			<div box-id="15"class="col"></div>
		</div>
			<div class="row">
			<div box-id="29"class="col"></div>
			<div class="col col-10">
				<p id="msg"></p>
			</div>
			<div box-id="16"class="col"></div>
		</div>
		<div class="row ">
			<div box-id="28"class="col"></div>
			<div box-id="27"class="col"></div>
			<div box-id="26"class="col"></div>
			<div box-id="25"class="col"></div>
			<div box-id="24"class="col"></div>
			<div box-id="23"class="col"></div>
			<div box-id="22"class="col"></div>
			<div box-id="21"class="col"></div>
			<div box-id="20"class="col"></div>
			<div box-id="19"class="col"></div>
			<div box-id="18"class="col"></div>
			<div box-id="17"class="col"></div>
		</div>
		<div>
			<div class="row">
				<div class="col ">
					<button type="button" class="btn btn-primary w-100" >start</button>
				</div>
			</div>
		</div>
	</div>
<script>
	let brickData=[
		{
			id:'1',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'2',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
			{
			id:'3',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'4',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'5',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
			{
			id:'6',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'7',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'8',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
			{
			id:'9',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'10',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'11',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
			{
			id:'12',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
				{
			id:'13',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'14',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'15',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
			{
			id:'16',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},		
		{
			id:'17',
			color:'green',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'18',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'19',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
			{
			id:'20',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},		
		{
			id:'21',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'22',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'23',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'24',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'25',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'26',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},		
		{
			id:'27',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'28',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'29',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'30',
			color:'green',
			icon:'bi bi-linkedin',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'31',
			color:'red',
			icon:'bi bi-instagram',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		{
			id:'32',
			color:'blue',
			icon:'bi bi-facebook',
			target:function(){
				return this.icon.split('-'[1]);
			}
		},
		]
	let steps=0;
	let allSteps=0;
	let current=0;
	let speed;
		//渲然畫面
		let bricks=document.querySelectorAll('[box-id]');
		
		

		bricks=Array.from(bricks).sort((a,b)=>{
			return a.getAttributeNode('box-id').value-b.getAttributeNode('box-id').value;
		
		});
		
		
		
		bricks.forEach((x,index)=>{
			let id =index+1;
			let data=brickData.find(x=>x.id==id);
			let icon=document.createElement('i');
			icon.setAttribute('class',data.icon);
			icon.style.color=data.color;
			x.appendChild(icon);
		});
		//Start Button
		document.querySelector('button').addEventListener("click",function(){
			speed=100;
			let random=Math.floor(Math.random()*brickData.length)+1;
			steps=random+(3*brickData.length);
			allSteps=steps;
			turnAround();

		});
		function turnAround(){
			console.log(steps);
			bricks[current].classList.remove('active');
			current++;
			if (current>=bricks.length)current=0; 
			bricks[current].classList.add('active');
			steps--;
			// if (steps>0) {setTimeout(turnAround,speed);
			// }else{
			// 	`跑完了＄{brickData[current].target()}`
			// 	let msgBox=document.querySelector('#msg');
			// 	let val=brickData[current].target();
			// 	msgBox.innerText=`接下30 mins->${val}`;
			// }
					if(steps>0){
			setTimeout(turnAround,speed);
			if (steps<Math.floor((allSteps)/3))speed+=7; 
			}else{
			let msgBox=document.querySelector('#msg');
			let val=brickData[current].target();
			msgBox.innerText=`接下30 mins->${val}`;
			alert(`請用${val}30mins`)
		}

		}
</script>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
    -->
  </body>
</html>